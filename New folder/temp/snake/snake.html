<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <canvas id='can' height="500" width="700" style='margin:auto; display:block;
        margin-top:13vh;'>

    </canvas>
      
    
    <script>
        var can = document.getElementById('can')
        can.style.border = '1px solid'
        var ctx = can.getContext('2d')
        var right = 0, left = 0, up = 0, down = 0
        var blocks = [[60,20], [40,20], [20,20]]
        var x_move = 0, y_move = 0;
        var food_x, food_y; 
        
        
        function move(){
            // clear the last  block and update its cords
            ctx.clearRect(blocks[blocks.length - 1][0], blocks[blocks.length - 1][1], 20, 20)
            blocks[blocks.length - 1][0] += x_move; blocks[blocks.length - 1][1] += y_move;

            // update first blocks cords and draw it 
            blocks[0][0] += x_move; blocks[0][1] += y_move; 
            ctx.fillRect(blocks[0][0], blocks[0][1], 20, 20)  
        }

        

        function add(x, y){
            if (x_move == 20) blocks.push([ (blocks[blocks.length -1][0] - 20), blocks[blocks.length -1][1] ])
            else if (x_move == -20) blocks.push([ (blocks[blocks.length -1][0] + 20), blocks[blocks.length -1][1]])
            else if (y_move == 20) blocks.push([ blocks[blocks.length -1][0], (blocks[blocks.length -1][1] - 20)])
            else if (y_move == -20) blocks.push([ blocks[blocks.length -1][0], (blocks[blocks.length -1][1]) + 20])
        }

        function food(){
            ctx.clearRect(food_x, food_y, 20, 20)
            food_x = Math.floor((Math.random() * can.width) / 20) * 20
            food_y = Math.floor((Math.random() * can.height) / 20) * 20
            ctx.fillStyle = 'green'
            ctx.fillRect(food_x, food_y, 20, 20)
            
        }
        
        document.addEventListener('keydown', (e) => {

            switch(e.key){
                case 'ArrowRight': {
                    y_move = 0;
                    x_move = 20;
                    break;
                }
                
                case 'ArrowLeft': {
                    y_move = 0;
                    x_move = -20
                    break;
                }

                case 'ArrowUp': {
                    x_move = 0;
                    y_move = -20;
                    break;
                }

                case 'ArrowDown': {
                    y_move = 20;
                    x_move = 0;
                    break;
                }
            }
        })

        
        ctx.fillRect(blocks[0][0], blocks[0][1], 20, 20) 
        var x = setInterval(move, 100)
        function stop(){clearInterval(x)}
        // food()       
    </script>
</body>
</html>